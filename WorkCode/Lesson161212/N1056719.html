﻿<html>

<head>
    <meta charset="utf-8">
    <title>第四題作業</title>
    <style>
        #container {
            outline: 1px solid red;
            width: 400px;
            height: 400px;
            margin: 50px auto 0 auto;
            position: relative;
        }
        
        #box {
            border-width: 1px;
            border-style: solid;
            border-color: black;
            padding: 5px;
            background-color: gray;
            margin-top: 1px;
            margin-bottom: 1px;
            margin-left: 1px;
            margin-right: 1px;
            position: relative;
        }
    </style>

    <script>
    // 設定條件值，最大高度與最大寬度
    var maxHeight = 95 ;
    var maxWidth  = 95 ;
    // 記錄累計值的計數器，初始預設值
    var boxWidth = 1 ;
    var boxHeight = 1 ;
    var milliseconds=1 ;
    // 記錄目前移動的位置
    // 1：由「右上」至「左上」
    // 2：由「右上」至「右下」
    // 3：由「右下」至「左下」
    // 4：由「左下」至「左上」
    var indicate = 1 ;
    // 記錄 Interval 物件
    var intervalMove ;
    var intervalCut ;
    // 記錄延遲值
    var delayMilliseconds ;
    
    // 取得畫面條件，進行動畫設定
    function start()
    {
        clearInterval(intervalMove);
        // 外框高度
        var heightInput = document.getElementById("height-input") ;
        // 外框寬度
        var widthInput = document.getElementById("width-input") ;
        // 延遲時間
        var milliseconds=document.getElementById("delay-input")
        delayMilliseconds = parseInt(milliseconds.value) ;
        // 外框物件
        var container = document.getElementById("container") ;
        // 設定外框高度與寬度
        container.style.height = parseInt(heightInput.value) ;
        container.style.width = parseInt(widthInput.value) ;
        // 啟動
        intervalMove = setInterval(moveBox,delayMilliseconds) ;
    }

    // 動畫效果呈現
    function moveBox()
    {
        var box = document.getElementById("box") ;
        if (indicate == 1)
        {
            // 從左上角開始，left 遞減，高度固定，寬度遞增
            box.style.top = "1%" ;
            box.style.left = "1%" ;
            box.style.height = "50%" ;

            if (parseInt(boxWidth) >= maxWidth)
            {
                // 寬度已經達到最大限度
                // 預設初始值
                boxWidth = 1 ;
                boxHeight = 1 ;
                // 停止執行
                clearInterval(intervalMove);
                // 啟動
                intervalCut = setInterval(cutBox,delayMilliseconds) ;
            }
            else
            {
                boxWidth ++ ;
            }            
            // 設定寬度
            box.style.width = parseInt(boxWidth) + "%"  ;
        }
        else if (indicate == 2)
        {
            // 從右上角開始，寬度固定，高度逐漸增加
            box.style.top = "1%" ;
            box.style.left = "46%" ;
            box.style.width = "50%" ;
            if (parseInt(boxHeight) >= maxHeight)
            {
                // 高度已經達到最大限度
                // 進行位置變換，並預設初始值
                boxWidth = 1 ;
                boxHeight = 1 ;
                indicate ++ ;
                // 停止執行
                clearInterval(intervalMove);
            }
            else
            {
                boxHeight ++ ;
            }
            // 設定高度            
            box.style.height = parseInt(boxHeight) + "%"  ;
        }
        else if (indicate == 3)
        {
            var left = maxWidth - parseInt(boxWidth) ;
            if (left <= 1)
                left = 1 ;
            // 從右下角開始，left 遞減，高度固定，寬度遞增
            box.style.top = "46%" ;
            box.style.height = "50%" ;
            if (parseInt(boxWidth) >= maxWidth)
            {
                // 寬度已經達到最大限度
                // 進行位置變換，並預設初始值
                boxWidth = 1 ;
                boxHeight = 1 ;
                indicate ++ ;
                // 停止執行
                clearInterval(intervalMove);
            }
            else
            {
                boxWidth ++ ;
            }
            // 設定畫面左邊位置
            // 設定寬度            
            box.style.left = parseInt(left) + "%"  ;
            box.style.width = parseInt(boxWidth) + "%"  ;
        }
        else if (indicate == 4)
        {
            // 從左下角開始，top 遞減，高度遞增，寬度固定
            var top = maxHeight - parseInt(boxHeight) ;
            if (top <= 1)
                top = 1 ;
            box.style.left = "1%" ;
            box.style.width = "50%" ;
            if (parseInt(boxHeight) >= maxHeight)
            {
                // 高度已經達到最大限度
                // 進行位置變換，並預設初始值
                boxWidth = 1 ;
                boxHeight = 1 ;
                indicate ++ ;
                // 停止執行
                clearInterval(intervalMove);
            }
            else
            {
                boxHeight ++ ;
            }            
            // 設定畫面上邊位置
            // 設定高度            
            box.style.top = parseInt(top) + "%"  ;
            box.style.height = parseInt(boxHeight) + "%"  ;
        }
        else if (indicate > 4)
        {
            // 回歸初始
            indicate = 1 ;
        }        
    }
    
    function cutBox()
    {
        var box = document.getElementById("box") ;
        if (indicate == 1)
        {
            // 從左上角開始，left 遞增，高度固定，寬度遞減
            var width = maxWidth - parseInt(boxWidth) ;
            if (width <= 1)
                width = 1 ;

            if (parseInt(boxWidth) >= maxWidth)
            {
                // 寬度已經達到最大限度
                // 進行位置變換，並預設初始值
                boxWidth = 1 ;
                boxHeight = 1 ;
                indicate ++ ;
                // 停止執行
                clearInterval(intervalCut);
                // 啟動
                intervalMove = setInterval(moveBox,delayMilliseconds) ;
            }
            else
            {
                boxWidth ++ ;
                // 設定寬度
                box.style.left = parseInt(boxWidth) + "%"  ;
                box.style.width = parseInt(width) + "%"  ;
            }            
        }
    }

  </script>
</head>

<body>
    <div id="input-div">
        高度:<input id="height-input" type="text" value="400" onkeyup="start()"> 寬度:
        <input id="width-input" type="text" value="400" onkeyup="start()"> delay:
        <input id="delay-input" type="text" value="10" onkeyup="start()"> step:
        <input id="step-input" type="text" value="1" onkeyup="start()">
        <input id="btn" type="button" value="1" onclick="start()">
    </div>
    <div id="container">
        <div id="box">
        </div>
    </div>
</body>

</html>